# JavaScript `this` Cheatsheet

| **Context**                                          | **Browser (non-strict)**                         | **Browser (strict)**                         | **Node.js (non-strict)**                     | **Node.js (strict)**                         | **Example**                                                                                  |
| ---------------------------------------------------- | ------------------------------------------------ | -------------------------------------------- | -------------------------------------------- | -------------------------------------------- | -------------------------------------------------------------------------------------------- |
| **Global scope (script, not module)**                | Global object (`window`)                         | `undefined`                                  | Global object (`global`)                     | `undefined`                                  | `console.log(this);`                                                                         |
| **Global scope (ES module)**                         | `undefined`                                      | `undefined`                                  | `undefined`                                  | `undefined`                                  | `console.log(this);` in module                                                               |
| **Function call (`f()`)**                            | Global object (`window`)                         | `undefined`                                  | Global object (`global`)                     | `undefined`                                  | `function f(){ console.log(this); } f();`                                                    |
| **Object method call (`obj.m()`)**                   | The object before the dot (`obj`)                | The object before the dot (`obj`)            | The object before the dot (`obj`)            | The object before the dot (`obj`)            | `let obj = { m(){ console.log(this); } }; obj.m();`                                          |
| **Nested object method (`obj1.obj2.m()`)**           | The object before the last dot (`obj2`)          | The object before the last dot (`obj2`)      | The object before the last dot (`obj2`)      | The object before the last dot (`obj2`)      | `let obj1 = { obj2:{ m(){ console.log(this); } } }; obj1.obj2.m();`                          |
| **Extracted method (`const m = obj.m; m()`)**        | Global object (`window`)                         | `undefined`                                  | Global object (`global`)                     | `undefined`                                  | `let f = obj.m; f();`                                                                        |
| **Arrow function**                                   | Lexical `this` (inherits from surrounding scope) | Lexical `this`                               | Lexical `this`                               | Lexical `this`                               | `let f = () => console.log(this); f();`                                                      |
| **Constructor function with `new`**                  | Newly created instance object                    | Newly created instance object                | Newly created instance object                | Newly created instance object                | `function Person(){ console.log(this); } new Person();`                                      |
| **Constructor function without `new`**               | Global object (`window`)                         | `undefined`                                  | Global object (`global`)                     | `undefined`                                  | `function Person(){ console.log(this); } Person();`                                          |
| **Class constructor**                                | Newly created instance object                    | Newly created instance object                | Newly created instance object                | Newly created instance object                | `class C { constructor(){ console.log(this); } } new C();`                                   |
| **Class method (`obj.m()`)**                         | The object before the dot (`obj`)                | The object before the dot (`obj`)            | The object before the dot (`obj`)            | The object before the dot (`obj`)            | `class C { m(){ console.log(this); } } new C().m();`                                         |
| **Static class method (`C.m()`)**                    | The class itself (`C`)                           | The class itself (`C`)                       | The class itself (`C`)                       | The class itself (`C`)                       | `class C { static m(){ console.log(this); } } C.m();`                                        |
| **Getter/Setter**                                    | The object on which the property is accessed     | The object on which the property is accessed | The object on which the property is accessed | The object on which the property is accessed | `let obj = { get x(){ console.log(this); return 1; } }; obj.x;`                              |
| **Event handler (`element.onclick = function(){}`)** | The element receiving the event                  | The element receiving the event              | *(N/A)*                                      | *(N/A)*                                      | `button.onclick = function(){ console.log(this); };`                                         |
| **Event handler (arrow)**                            | Lexical `this` (inherits from outer scope)       | Lexical `this`                               | *(N/A)*                                      | *(N/A)*                                      | `button.onclick = () => console.log(this);`                                                  |
| **`setTimeout(function(){})`**                       | Global object (`window`)                         | `undefined`                                  | Global object (`global`) / Timeout object    | `undefined`                                  | `setTimeout(function(){ console.log(this); }, 0);`                                           |
| **`setTimeout(() => {})`**                           | Lexical `this` (inherits from outer scope)       | Lexical `this`                               | Lexical `this`                               | Lexical `this`                               | `setTimeout(() => console.log(this), 0);`                                                    |
| **`call` / `apply`**                                 | Explicitly set to provided object                | Explicitly set to provided object            | Explicitly set to provided object            | Explicitly set to provided object            | `function f(){ console.log(this); } f.call({x:1});`                                          |
| **`bind`**                                           | Bound object                                     | Bound object                                 | Bound object                                 | Bound object                                 | `let g = f.bind({y:2}); g();`                                                                |
| **`with` statement**                                 | The object in scope chain                        | The object in scope chain                    | The object in scope chain                    | The object in scope chain                    | `with({a:1}){ console.log(this); }`                                                          |
| **`eval("this")`**                                   | Global object (`window`)                         | `undefined`                                  | Global object (`global`)                     | `undefined`                                  | `console.log(eval("this"));`                                                                 |
| **Object literal method shorthand**                  | The object containing the method                 | The object containing the method             | The object containing the method             | The object containing the method             | `let obj = { m(){ console.log(this); } }; obj.m();`                                          |
| **Object literal arrow method**                      | Lexical `this` (inherits from outer scope)       | Lexical `this`                               | Lexical `this`                               | Lexical `this`                               | `let obj = { m: () => console.log(this) }; obj.m();`                                         |
| **Class field arrow method**                         | Lexical `this` (bound to instance)               | Lexical `this` (bound to instance)           | Lexical `this` (bound to instance)           | Lexical `this` (bound to instance)           | `class C { m = () => console.log(this); } new C().m();`                                      |
| **`super.method()`**                                 | Current instance (`this`)                        | Current instance (`this`)                    | Current instance (`this`)                    | Current instance (`this`)                    | `class A { m(){ console.log(this); } } class B extends A { m(){ super.m(); } } new B().m();` |
| **Top level in CommonJS module**                     | *(N/A)*                                          | *(N/A)*                                      | `module.exports`                             | `module.exports`                             | `console.log(this);` inside `file.js`                                                        |
| **Top level in ES module**                           | `undefined`                                      | `undefined`                                  | `undefined`                                  | `undefined`                                  | `console.log(this);` in `esm.mjs`                                                            |
| **Node.js REPL top level**                           | *(N/A)*                                          | *(N/A)*                                      | Global object (`global`)                     | Global object (`global`)                     | Type `this` in Node.js REPL                                                                  |
